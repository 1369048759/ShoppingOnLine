webpackJsonp([2],{0:function(e,t,o){var n;n=function(e,t,n){o(9),o(7),o(8),o(6),o(18),o(5),o(3),o(4);o(1);o(10),o(11),o(14);var r=angular.module("reset",["ngRoute","ngAnimate","reset.service","reset.controller","reset.direct","ngCookies","reset.filters"],angular.noop);r.config(["$routeProvider","$locationProvider","$httpProvider",function(e,t,o){e.when("/",{templateUrl:"/web/tpl/desk/reset/account.html",controller:"accountCtrl"}).when("/sms",{templateUrl:"/web/tpl/desk/reset/sms.html",controller:"smsCtrl"}).when("/email",{templateUrl:"/web/tpl/desk/reset/email.html",controller:"emailCtrl"}).when("/question",{templateUrl:"/web/tpl/desk/reset/question.html",controller:"questionCtrl"}).when("/password",{templateUrl:"/web/tpl/desk/reset/password.html",controller:"passwordCtrl"}).when("/finish",{templateUrl:"/web/tpl/desk/reset/finish.html",controller:"finishCtrl"}).otherwise({redirectTo:"/"}),o.defaults.headers.get||(o.defaults.headers.get={}),o.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",o.defaults.headers.get["Cache-Control"]="no-cache",o.defaults.headers.get.Pragma="no-cache"}])}.call(t,o,t,e),!(void 0!==n&&(e.exports=n))},13:function(e,t,o){var n;n=function(e,t,n){function r(e){this.config={targetCls:".inputElem",parentCls:".parentCls",hiddenCls:".hiddenCls",searchForm:".jqtransformdone",hoverBg:"hoverBg",inputValColor:"red",mailArr:["@qq.com","@126.com","@163.com","@139.com","@gmail.com","@hotmail.com","@yahoo.com","@sina.com","@outlook.com","@aol.com","@aim.com"],isSelectHide:!0,callback:null},this.cache={onlyFlag:!0,currentIndex:-1,oldIndex:-1},this.init(e)}var a=o(2);n.exports=r,r.prototype={constructor:r,init:function(e){this.config=a.extend(this.config,e||{});var t=this,o=t.config,n=t.cache;a(o.targetCls).each(function(e,r){var i=function(e){var i=e.target,l=a.trim(a(this).val()),s=e.which,d=a(this).outerHeight(),c=a(this).outerWidth(),p=a(this).closest(o.parentCls);a(p).css({position:"relative"}),l.indexOf("@")<0?(a(r).attr({"data-html":""}),a(o.hiddenCls,p).val(""),n.currentIndex=-1,n.oldIndex=-1,a(".auto-tip",p)&&!a(".auto-tip",p).hasClass("hidden")&&a(".auto-tip",p).addClass("hidden"),t._removeBg(p)):(a(r).attr({"data-html":l}),a(o.hiddenCls,p).val(l),a(".auto-tip",p)&&a(".auto-tip",p).hasClass("hidden")&&a(".auto-tip",p).removeClass("hidden"),t._renderHTML({keycode:s,e:e,target:i,targetVal:l,height:d,width:c,parentNode:p}))};a(r).keyup(i)}),a(o.searchForm).each(function(e,t){a(t).keyup(function(e){var t=e.keyCode;if(13==t)return!1})}),a(document).click(function(e){e.stopPropagation();var t=e.target,n=o.targetCls.replace(/^\./,"");a(t).hasClass(n)||a(".auto-tip")&&a(".auto-tip").each(function(e,t){!a(t).hasClass("hidden")&&a(t).addClass("hidden")})})},_renderHTML:function(e){var t,o=this,n=o.config,r=o.cache,i=o._keyCode(e.keycode);if(a(".auto-tip",e.parentNode).hasClass("hidden")&&a(".auto-tip",e.parentNode).removeClass("hidden"),i>-1)o._keyUpAndDown(e.targetVal,e.e,e.parentNode);else{if(t=/@/.test(e.targetVal)?e.targetVal.replace(/@.*/,""):e.targetVal,r.onlyFlag){a(e.parentNode).append('<input type="hidden" class="hiddenCls"/>');for(var l='<ul class="auto-tip">',s=0;s<n.mailArr.length;s++)l+='<li class="p-index'+s+'"><span class="output-num"></span><em class="em" data-html="'+n.mailArr[s]+'">'+n.mailArr[s]+"</em></li>";l+="</ul>",r.onlyFlag=!1,a(e.parentNode).append(l),a(".auto-tip",e.parentNode).css({position:"absolute",top:e.height,width:e.width-2+"px","z-index":1e4})}a(".auto-tip li",e.parentNode).each(function(e,o){a(".output-num",o).html(t),!a(".output-num",o).hasClass(n.inputValColor)&&a(".output-num",o).addClass(n.inputValColor);var r=a.trim(a(".em",o).attr("data-html"));a(o).attr({"data-html":t+""+r})}),o._accurateMate({target:e.target,parentNode:e.parentNode}),o._itemHover(e.parentNode),o._executeClick(e.parentNode)}},_accurateMate:function(e){var t=this,o=t.config,n=t.cache,r=a.trim(a(e.target,e.parentNode).attr("data-html")),i=[];if(/@/.test(r)){var l=r.replace(/@.*/,""),s=r.replace(/.*@/,"");if(a.map(o.mailArr,function(e){var t=new RegExp(s);t.test(e)&&i.push(e)}),i.length>0){a(".auto-tip",e.parentNode).html(""),a(".auto-tip",e.parentNode)&&a(".auto-tip",e.parentNode).hasClass("hidden")&&a(".auto-tip",e.parentNode).removeClass("hidden");for(var d="",c=0,p=i.length;c<p;c++)d+='<li class="p-index'+c+'"><span class="output-num"></span><em class="em" data-html="'+i[c]+'">'+i[c]+"</em></li>";a(".auto-tip",e.parentNode).html(d),a(".auto-tip li",e.parentNode).each(function(e,t){a(".output-num",t).html(l),!a(".output-num",t).hasClass(o.inputValColor)&&a(".output-num",t).addClass(o.inputValColor);var n=a.trim(a(".em",t).attr("data-html"));a(t).attr("data-html",""),a(t).attr({"data-html":l+""+n})}),n.currentIndex=-1,n.oldIndex=-1,a(".auto-tip .output-num",e.parentNode).html(l),t._itemHover(e.parentNode),t._executeClick(e.parentNode)}else a(".auto-tip",e.parentNode)&&!a(".auto-tip",e.parentNode).hasClass("hidden")&&a(".auto-tip",e.parentNode).addClass("hidden"),a(".auto-tip",e.parentNode).html("")}},_itemHover:function(e){var t=this,o=t.config;t.cache;a(".auto-tip li",e).hover(function(e,t){!a(this).hasClass(o.hoverBg)&&a(this).addClass(o.hoverBg)},function(){a(this).hasClass(o.hoverBg)&&a(this).removeClass(o.hoverBg)})},_removeBg:function(e){var t=this,o=t.config;a(".auto-tip li",e).each(function(e,t){a(t).hasClass(o.hoverBg)&&a(t).removeClass(o.hoverBg)})},_keyUpAndDown:function(e,t,o){var n=this,r=n.cache,i=n.config;if(a(".auto-tip li",o)&&a(".auto-tip li").length>0){var l=a(".auto-tip li",o).length,s=t.keyCode;if(r.oldIndex=r.currentIndex,38==s){if(r.currentIndex==-1?r.currentIndex=l-1:(r.currentIndex=r.currentIndex-1,r.currentIndex<0&&(r.currentIndex=l-1)),r.currentIndex!==-1){!a(".auto-tip .p-index"+r.currentIndex,o).hasClass(i.hoverBg)&&a(".auto-tip .p-index"+r.currentIndex,o).addClass(i.hoverBg).siblings().removeClass(i.hoverBg);var d=a(".auto-tip .p-index"+r.currentIndex,o).attr("data-html");a(i.targetCls,o).val(d),a(i.hiddenCls,o).val(d),i.callback&&a.isFunction(i.callback)&&i.callback(d)}}else if(40==s){if(r.currentIndex==l-1?r.currentIndex=0:(r.currentIndex++,r.currentIndex>l-1&&(r.currentIndex=0)),r.currentIndex!==-1){!a(".auto-tip .p-index"+r.currentIndex,o).hasClass(i.hoverBg)&&a(".auto-tip .p-index"+r.currentIndex,o).addClass(i.hoverBg).siblings().removeClass(i.hoverBg);var d=a(".auto-tip .p-index"+r.currentIndex,o).attr("data-html");a(i.targetCls,o).val(d),a(i.hiddenCls,o).val(d),i.callback&&a.isFunction(i.callback)&&i.callback(d)}}else if(13==s){if(i.isSelectHide&&!a(".auto-tip",o).hasClass("hidden")&&a(".auto-tip",o).addClass("hidden"),r.oldIndex==-1)return;var c=a(".auto-tip .p-index"+r.oldIndex,o).attr("data-html");a(i.targetCls,o).val(c),a(i.hiddenCls,o).val(c)}}},_keyCode:function(e){for(var t=["17","18","38","40","37","39","33","34","35","46","36","13","45","44","145","19","20","9"],o=0,n=t.length;o<n;o++)if(e==t[o])return o;return-1},_executeClick:function(e){var t=this,o=t.config;a(".auto-tip li",e).unbind("click"),a(".auto-tip li",e).bind("click",function(t){var n=a(this).attr("data-html");a(o.targetCls,e).val(n),o.isSelectHide&&!a(".auto-tip",e).hasClass("hidden")&&a(".auto-tip",e).addClass("hidden"),a(o.hiddenCls,e).val(n),o.callback&&a.isFunction(o.callback)&&o.callback(n)})}}}.call(t,o,t,e),!(void 0!==n&&(e.exports=n))},14:10,18:function(e,t,o){var n;n=function(e,t,n){var r=o(2),a=o(13),i=o(1);o(12);return angular.module("reset.controller",[],angular.noop).controller("accountCtrl",["$scope","$window","$location","$http","STORE","COMMON",function(e,t,o,n,l,s){var d=s(e);if(i.errorCode[1011]=i.i18n.account_error,e.actions={nextPage:function(){d.phoneAndEmailValid(e.actions.phoneNext,e.actions.emailNext)},phoneNext:function(){if(!d.isNullObj(e.formInvalid)||e.accountForm.$invalid){if(d.validate(e.accountForm.phoneNum.$error,"phoneError"))return;if(d.validate(e.accountForm.validCode.$error,"codeError"))return}e.actions.nextPageSend()},emailNext:function(){if(!d.isNullObj(e.formInvalid)||e.accountForm.$invalid){if(d.validate(e.accountForm.phoneNum.$error,"emailError"))return;if(d.validate(e.accountForm.validCode.$error,"codeError"))return;if(d.validate(e.formInvalid,"emailError"))return}e.actions.nextPageSend()},nextPageSend:function(){d.httpHandle(e.infor.phoneLogin?"/members/resetbygvc.do":"/members/emailresetready",{tn:e.infor.phoneLogin?e.infor.phoneNum:"",em:e.infor.phoneLogin?"":e.infor.phoneNum,vid:e.infor.codeId,vtx:e.infor.validCode,up:e.infor.phoneLogin?"":r.param(e.location),act:e.location.act?"Algeria_ResetPassword":""},e.actions.nextPageHandle,e.actions.getImgCode)},nextPageHandle:function(t){e.$parent.infor.errorCode="",e.infor.session=t.s,e.infor.qId=t.qid?t.qid:"",e.infor.phoneLogin&&(e.infor.phoneNum=e.infor.phoneNum),d.clearImportantInfor(),d.storeInfo(),e.infor.phoneLogin?o.path("/sms").replace():o.path("/email").replace()},getImgCode:function(){d.getImgCode()},callback:function(t){e.infor.phoneNum=t}},e.$parent.infor=l.get("parent"),angular.extend(e.$parent.infor,{title:i.i18n.reset_title,errorCode:"",pageTit2:!1,pageTit3:!1,pageArrow1:!1,pageArrow2:!1}),d.getLocation(),e.location.tel&&(e.infor.phoneNum=e.location.tel),new a({callback:e.actions.callback}),e.actions.getImgCode(),e.location.developer&&"true"==e.location.developer){delete e.location.developer;var c=new Date;c.setDate(c.getDate()+1),d.setCookie("developer",!0,1),e.i18n.phone_number=i.i18n.email_address}else d.clearCookie("developer")}]).controller("smsCtrl",["$scope","$window","$location","$http","STORE","COMMON",function(e,t,o,n,r,a){var i=a(e);e.actions={getSms:function(){i.getSms("/members/getsmsforreset.do",60)},nextPage:function(){e.smsForm.$invalid&&i.validate(e.smsForm.smsCode.$error,"smsError")||i.httpHandle("/gsp/reset/api/resetbysmscode.do",{tn:e.infor.phoneNum,s:e.infor.session,sc:e.infor.smsCode},e.actions.nextPageHandle)},nextPageHandle:function(t){e.$parent.infor.errorCode="",i.clearImportantInfor(),i.storeInfo(),o.path("/password").replace()},questionPage:function(){i.gotoQuestionPage()}},i.getInfo(),i.invalidPage()||(i.reTime(60),e.$parent.infor.pageArrow1=!0,e.$parent.infor.pageTit2=!0)}]).controller("emailCtrl",["$scope","$window","$location","$http","STORE","COMMON",function(e,t,o,n,r,a){var l=a(e);if(e.actions={sendMail:function(){l.sendMail("/members/getactivationmailforreset",30)},nextPage:function(){t.location.href=d},hideBtn:function(){d?e.infor.address=!0:e.infor.address=!1},questionPage:function(){l.gotoQuestionPage()}},l.getInfo(),!l.invalidPage()){var s=e.infor.phoneNum.split("@")[1],d=i.mail[s];e.$parent.infor.pageArrow1=!0,e.$parent.infor.pageTit2=!0,e.actions.hideBtn(),e.actions.sendMail()}}]).controller("questionCtrl",["$scope","$window","$location","$http","COMMON",function(e,t,o,n,r){i.errorCode[1011]=i.i18n.secret_answer_error;var a=r(e);e.actions={getTitle:function(){a.httpHandle(e.infor.phoneLogin?"/members/resetbyquest.do":"/members/getquestforemailreset",{tn:e.infor.phoneLogin?e.infor.phoneNum:"",s:e.infor.session},e.actions.getTitleHandle)},getTitleHandle:function(t){e.infor.qTit=t.qt},nextPage:function(){e.questionForm.$invalid&&a.validate(e.questionForm.qAns.$error,"questionError")||a.httpHandle(e.infor.phoneLogin?"/members/resetbyanswer.do":"/members/verifyanswerforemailreset",{txt:e.infor.qAns,s:e.infor.session},e.actions.nextPageHandle)},nextPageHandle:function(){e.$parent.infor.errorCode="",a.clearImportantInfor(),a.storeInfo(),o.path("/password").replace()}},a.getInfo(),a.invalidPage()||e.actions.getTitle()}]).controller("passwordCtrl",["$scope","$window","$location","$http","COMMON",function(e,t,o,n,r){var a=r(e);e.actions={nextPage:function(){if(e.passwordForm.$invalid||e.infor.password!==e.infor.repassword){if(a.validate(e.passwordForm.password.$error,"passwordError"))return;if(a.validate(e.passwordForm.repassword.$error,"passwordError"))return;return void a.noequal()}a.httpHandle(e.infor.phoneLogin?"/gsp/reset/api/resetbypassnew.do":"/members/setpasswordforemailreset",{s:e.infor.session,pn:e.infor.repassword},e.actions.nextPageHandle)},nextPageHandle:function(t){e.$parent.infor.errorCode="",e.infor.error=!1,t.up&&(e.location=t.up),a.clearImportantInfor(),a.storeInfo(),o.path("/finish").replace()},verify:function(){a.httpHandle("/members/verifyactivationcodeforreset",{c:s.code},e.actions.nextPageRight,e.actions.nextPageError)},nextPageRight:function(t){e.infor.session=t.s},nextPageError:function(t){e.infor.error=!0,e.$parent.infor.errorCode=i.errorCode[t.r],e.location={},a.clearImportantInfor(),a.storeInfo(),o.path("/finish").replace()}},a.getInfo();var l={title:i.i18n.reset_pass,pageTit2:!0,pageTit3:!0,pageArrow1:!0,pageArrow2:!0};if(angular.extend(e.$parent.infor,l),a.isNullObj(e.infor)){var s=o.search();if(!s.code)return void a.changePage();e.infor={phoneLogin:!1,error:!1},e.actions.verify()}}]).controller("finishCtrl",["$scope","STORE","$window","COMMON","$location",function(e,t,o,n,r){var a=n(e);e.actions={nextPage:function(){return r.search("code",null),e.infor.error?void a.changePage():a.getCookie("developer")?(a.clearCookie("developer"),void(o.location.href=a.getUrl(a.getProductionDeveloperUrl,a.getTestDeveloperUrl,e.location))):void(o.location.href=a.getUrl(a.getProductionLoginUrl,a.getTestLoginUrl,e.location))}},a.getInfo(),a.invalidPage()||(e.$parent.infor.pageArrow3=!0,e.$parent.infor.pageTit4=!0,a.phoneScreenHandle())}]).controller("main",["$scope","STORE","COMMON","$location",function(e,t,o,n){t.clear(),e.i18n=i.i18n,e.infor={pageTit1:!0,pageTit2:!1,pageTit3:!1,pageTit4:!1,pageArrow2:!1,pageArrow3:!1,pop:!1,popNotice:i.i18n.reset_page_timeout,popBtn:i.i18n.reset_pass},t.set("parent",e.infor)}])}.call(t,o,t,e),!(void 0!==n&&(e.exports=n))}});