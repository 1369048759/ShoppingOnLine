webpackJsonp([1],{0:function(e,r,t){var o;o=function(e,r,o){t(9),t(7),t(8),t(6),t(19),t(5),t(3),t(4),t(10),t(11),t(25);var n=angular.module("reset",["ngRoute","ngAnimate","reset.controller","reset.service","reset.direct","ngCookies","reset.filters"]);n.config(["$routeProvider","$locationProvider","$httpProvider",function(e,r,t){e.when("/",{templateUrl:"/web/tpl/desk/start/login.html",controller:"loginCtrl"}).when("/register",{templateUrl:"/web/tpl/desk/start/register.html",controller:"registerCtrl"}).when("/account",{templateUrl:"/web/tpl/desk/start/account.html",controller:"accountCtrl"}).when("/password",{templateUrl:"/web/tpl/desk/start/password.html",controller:"passwordCtrl"}).when("/bind",{templateUrl:"/web/tpl/desk/start/account.html",controller:"bindCtrl"}).when("/bindPass",{templateUrl:"/web/tpl/desk/start/password.html",controller:"bindPassCtrl"}).when("/finish",{templateUrl:"/web/tpl/desk/start/finish.html",controller:"finishCtrl"}).when("/accountMail",{templateUrl:"/web/tpl/desk/start/accountMail.html",controller:"accountMailCtrl"}).when("/verifyMail",{templateUrl:"/web/tpl/desk/start/verifyMail.html",controller:"verifyMailCtrl"}).when("/bindFinish",{templateUrl:"/web/tpl/desk/start/bindFinish.html",controller:"finishCtrl"}).when("/bindWeb",{templateUrl:"/web/tpl/desk/start/bindWeb.html",controller:"bindWebCtrl"}).when("/bindWebPass",{templateUrl:"/web/tpl/desk/start/bindWebPass.html",controller:"bindWebPassCtrl"}).when("/bindWebFinish",{templateUrl:"/web/tpl/desk/start/bindFinish.html",controller:"bindWebFinishCtrl"}).otherwise({redirectTo:"/"}),t.defaults.headers.get||(t.defaults.headers.get={}),t.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",t.defaults.headers.get["Cache-Control"]="no-cache",t.defaults.headers.get.Pragma="no-cache"}])}.call(r,t,r,e),!(void 0!==o&&(e.exports=o))},13:function(e,r,t){var o;o=function(e,r,o){function n(e){this.config={targetCls:".inputElem",parentCls:".parentCls",hiddenCls:".hiddenCls",searchForm:".jqtransformdone",hoverBg:"hoverBg",inputValColor:"red",mailArr:["@qq.com","@126.com","@163.com","@139.com","@gmail.com","@hotmail.com","@yahoo.com","@sina.com","@outlook.com","@aol.com","@aim.com"],isSelectHide:!0,callback:null},this.cache={onlyFlag:!0,currentIndex:-1,oldIndex:-1},this.init(e)}var a=t(2);o.exports=n,n.prototype={constructor:n,init:function(e){this.config=a.extend(this.config,e||{});var r=this,t=r.config,o=r.cache;a(t.targetCls).each(function(e,n){var i=function(e){var i=e.target,l=a.trim(a(this).val()),s=e.which,c=a(this).outerHeight(),d=a(this).outerWidth(),p=a(this).closest(t.parentCls);a(p).css({position:"relative"}),l.indexOf("@")<0?(a(n).attr({"data-html":""}),a(t.hiddenCls,p).val(""),o.currentIndex=-1,o.oldIndex=-1,a(".auto-tip",p)&&!a(".auto-tip",p).hasClass("hidden")&&a(".auto-tip",p).addClass("hidden"),r._removeBg(p)):(a(n).attr({"data-html":l}),a(t.hiddenCls,p).val(l),a(".auto-tip",p)&&a(".auto-tip",p).hasClass("hidden")&&a(".auto-tip",p).removeClass("hidden"),r._renderHTML({keycode:s,e:e,target:i,targetVal:l,height:c,width:d,parentNode:p}))};a(n).keyup(i)}),a(t.searchForm).each(function(e,r){a(r).keyup(function(e){var r=e.keyCode;if(13==r)return!1})}),a(document).click(function(e){e.stopPropagation();var r=e.target,o=t.targetCls.replace(/^\./,"");a(r).hasClass(o)||a(".auto-tip")&&a(".auto-tip").each(function(e,r){!a(r).hasClass("hidden")&&a(r).addClass("hidden")})})},_renderHTML:function(e){var r,t=this,o=t.config,n=t.cache,i=t._keyCode(e.keycode);if(a(".auto-tip",e.parentNode).hasClass("hidden")&&a(".auto-tip",e.parentNode).removeClass("hidden"),i>-1)t._keyUpAndDown(e.targetVal,e.e,e.parentNode);else{if(r=/@/.test(e.targetVal)?e.targetVal.replace(/@.*/,""):e.targetVal,n.onlyFlag){a(e.parentNode).append('<input type="hidden" class="hiddenCls"/>');for(var l='<ul class="auto-tip">',s=0;s<o.mailArr.length;s++)l+='<li class="p-index'+s+'"><span class="output-num"></span><em class="em" data-html="'+o.mailArr[s]+'">'+o.mailArr[s]+"</em></li>";l+="</ul>",n.onlyFlag=!1,a(e.parentNode).append(l),a(".auto-tip",e.parentNode).css({position:"absolute",top:e.height,width:e.width-2+"px","z-index":1e4})}a(".auto-tip li",e.parentNode).each(function(e,t){a(".output-num",t).html(r),!a(".output-num",t).hasClass(o.inputValColor)&&a(".output-num",t).addClass(o.inputValColor);var n=a.trim(a(".em",t).attr("data-html"));a(t).attr({"data-html":r+""+n})}),t._accurateMate({target:e.target,parentNode:e.parentNode}),t._itemHover(e.parentNode),t._executeClick(e.parentNode)}},_accurateMate:function(e){var r=this,t=r.config,o=r.cache,n=a.trim(a(e.target,e.parentNode).attr("data-html")),i=[];if(/@/.test(n)){var l=n.replace(/@.*/,""),s=n.replace(/.*@/,"");if(a.map(t.mailArr,function(e){var r=new RegExp(s);r.test(e)&&i.push(e)}),i.length>0){a(".auto-tip",e.parentNode).html(""),a(".auto-tip",e.parentNode)&&a(".auto-tip",e.parentNode).hasClass("hidden")&&a(".auto-tip",e.parentNode).removeClass("hidden");for(var c="",d=0,p=i.length;d<p;d++)c+='<li class="p-index'+d+'"><span class="output-num"></span><em class="em" data-html="'+i[d]+'">'+i[d]+"</em></li>";a(".auto-tip",e.parentNode).html(c),a(".auto-tip li",e.parentNode).each(function(e,r){a(".output-num",r).html(l),!a(".output-num",r).hasClass(t.inputValColor)&&a(".output-num",r).addClass(t.inputValColor);var o=a.trim(a(".em",r).attr("data-html"));a(r).attr("data-html",""),a(r).attr({"data-html":l+""+o})}),o.currentIndex=-1,o.oldIndex=-1,a(".auto-tip .output-num",e.parentNode).html(l),r._itemHover(e.parentNode),r._executeClick(e.parentNode)}else a(".auto-tip",e.parentNode)&&!a(".auto-tip",e.parentNode).hasClass("hidden")&&a(".auto-tip",e.parentNode).addClass("hidden"),a(".auto-tip",e.parentNode).html("")}},_itemHover:function(e){var r=this,t=r.config;r.cache;a(".auto-tip li",e).hover(function(e,r){!a(this).hasClass(t.hoverBg)&&a(this).addClass(t.hoverBg)},function(){a(this).hasClass(t.hoverBg)&&a(this).removeClass(t.hoverBg)})},_removeBg:function(e){var r=this,t=r.config;a(".auto-tip li",e).each(function(e,r){a(r).hasClass(t.hoverBg)&&a(r).removeClass(t.hoverBg)})},_keyUpAndDown:function(e,r,t){var o=this,n=o.cache,i=o.config;if(a(".auto-tip li",t)&&a(".auto-tip li").length>0){var l=a(".auto-tip li",t).length,s=r.keyCode;if(n.oldIndex=n.currentIndex,38==s){if(n.currentIndex==-1?n.currentIndex=l-1:(n.currentIndex=n.currentIndex-1,n.currentIndex<0&&(n.currentIndex=l-1)),n.currentIndex!==-1){!a(".auto-tip .p-index"+n.currentIndex,t).hasClass(i.hoverBg)&&a(".auto-tip .p-index"+n.currentIndex,t).addClass(i.hoverBg).siblings().removeClass(i.hoverBg);var c=a(".auto-tip .p-index"+n.currentIndex,t).attr("data-html");a(i.targetCls,t).val(c),a(i.hiddenCls,t).val(c),i.callback&&a.isFunction(i.callback)&&i.callback(c)}}else if(40==s){if(n.currentIndex==l-1?n.currentIndex=0:(n.currentIndex++,n.currentIndex>l-1&&(n.currentIndex=0)),n.currentIndex!==-1){!a(".auto-tip .p-index"+n.currentIndex,t).hasClass(i.hoverBg)&&a(".auto-tip .p-index"+n.currentIndex,t).addClass(i.hoverBg).siblings().removeClass(i.hoverBg);var c=a(".auto-tip .p-index"+n.currentIndex,t).attr("data-html");a(i.targetCls,t).val(c),a(i.hiddenCls,t).val(c),i.callback&&a.isFunction(i.callback)&&i.callback(c)}}else if(13==s){if(i.isSelectHide&&!a(".auto-tip",t).hasClass("hidden")&&a(".auto-tip",t).addClass("hidden"),n.oldIndex==-1)return;var d=a(".auto-tip .p-index"+n.oldIndex,t).attr("data-html");a(i.targetCls,t).val(d),a(i.hiddenCls,t).val(d)}}},_keyCode:function(e){for(var r=["17","18","38","40","37","39","33","34","35","46","36","13","45","44","145","19","20","9"],t=0,o=r.length;t<o;t++)if(e==r[t])return t;return-1},_executeClick:function(e){var r=this,t=r.config;a(".auto-tip li",e).unbind("click"),a(".auto-tip li",e).bind("click",function(r){var o=a(this).attr("data-html");a(t.targetCls,e).val(o),t.isSelectHide&&!a(".auto-tip",e).hasClass("hidden")&&a(".auto-tip",e).addClass("hidden"),a(t.hiddenCls,e).val(o),t.callback&&a.isFunction(t.callback)&&t.callback(o)})}}}.call(r,t,r,e),!(void 0!==o&&(e.exports=o))},19:function(e,r,t){var o;o=function(e,r,o){var n=t(2),a=t(15),i=t(13),l=t(1),s=t(12);return angular.module("reset.controller",[],angular.noop).controller("loginCtrl",["$scope","$window","$location","$http","STORE","COMMON","$cookies","$cookieStore","$timeout",function(e,r,t,o,c,d,p,u,f){var g=d(e);e.actions={login:function(){return n("#phoneNum").val()&&(e.infor.phoneNum=n.trim(n("#phoneNum").val())),n("#password").val()&&(e.infor.password=n("#password").val()),"error"==this.getYYHUrl()?void(e.$parent.infor.errorCode=l.i18n.param_error):void g.phoneAndEmailValid(e.actions.phoneNext,e.actions.emailNext)},registerPage:function(){e.$parent.actions.register()},phoneNext:function(){if(!g.isNullObj(e.formInvalid)||e.loginForm.$invalid){if(g.validate(e.loginForm.phoneNum.$error,"phoneError"))return;if(g.validate(e.loginForm.password.$error,"passwordError"))return;if(g.validate(e.formInvalid,"phoneError"))return;if(g.validate(e.loginForm.validCode.$error,"codeError"))return}e.actions.nextSent()},emailNext:function(){if(!g.isNullObj(e.formInvalid)||e.loginForm.$invalid){if(g.validate(e.loginForm.phoneNum.$error,"emailError"))return;if(g.validate(e.loginForm.password.$error,"passwordError"))return;if(g.validate(e.formInvalid,"emailError"))return;if(g.validate(e.loginForm.validCode.$error,"codeError"))return}e.actions.nextSent()},nextSent:function(){var r=this.getYYHUrl();r||(r="/members/loginauthorize"),e.$parent.infor.errorCode="",g.httpHandle(r,{tn:e.infor.phoneNum,vid:e.infor.codeId||"",vtx:e.infor.validCode||"",p:e.infor.password,ir:e.infor.ifRemenber,vty:"vtext"},function(r){g.getDoubleCookie(r,e.actions.loginHandle)},function(r){1118==r.r&&(e.infor.codeRequired=!0,e.$parent.infor.codeRequired=!0),e.infor.codeRequired&&e.actions.getImgCode()},{params:e.location})},loginHandle:function(t){if(e.$parent.infor.errorCode="",!e.location.redirect_uri)return void(r.location.href=g.getUrl(g.getProductionYunUrl,g.getTestYunUrl));var o,i,l=decodeURIComponent(e.location.redirect_uri);if(l.indexOf("?")>=0){var s=a._parserUrl(l);i=s.url,o=s.param}else i=l,o={};e.location.state&&(o.state=e.location.state),t.ic&&1==t.ic&&(o.code=t.gd),r.location.href=i+"?"+n.param(o)},getImgCode:function(){g.getImgCode()},register:function(){t.path("/register").replace()},qqBtn:function(){"undefined"!=typeof QC&&(QC.Login.check()&&(e.location.r&&"false"==e.location.r||QC.Login.signOut()),QC.Login({btnId:"qqLoginBtn",scope:"all",size:"C_S"},function(r,t){var o=document.getElementById(t.btnId),n=['<span><img src="{figureurl}" class="{size_key}" width="5.5%" /></span>'].join("");o&&(o.innerHTML=QC.String.format(n,{nickname:QC.String.escHTML(r.nickname),figureurl:r.figureurl})),QC.Login.getMe(e.actions.qqLoginHandle)},function(e){}))},qqLoginHandle:function(r,t){var o={access_token:t,openid:r,expires_in:"7776000"};g.httpHandle.call(this,"/members/loginqqauthorize",o,function(r){return console.log(r),+r.op?(angular.extend(e.infor,o),void e.actions.nextPage(r)):void g.getDoubleCookie(r,e.actions.loginHandle)},function(r){e.$parent.infor.errorCode=l.i18n.qq_fail,QC.Login.signOut()},{params:e.location}),e.$apply()},getYYHUrl:function(){var r=s().attr().path,t=e.location;return!(r.indexOf("yyh")<0)&&(t.client_id?"/members/loginauthorize_yyh":"error")},nextPage:function(r){e.$parent.infor.errorCode="",r.s&&(e.infor.session=r.s),g.clearImportantInfor(),g.storeInfo(),t.path("/bind").replace()},callback:function(r){e.infor.phoneNum=r}},e.infor={codeRequired:!1,phoneNum:p.mobileno?p.mobileno:"",ifRemenber:p.ifRemenber&&"true"==p.ifRemenber},angular.extend(e.$parent.infor,{register:!1,errorCode:""}),u.put("register",!1),g.getLocation(),e.location.client_id&&e.actions.qqBtn(),e.infor.phoneNum&&(e.location.tel=e.infor.phoneNum),e.$parent.infor.developer&&(e.location.developer=e.infor.developer=!0,e.i18n.phone_number=l.i18n.email_address),e.$parent.infor.w3&&(e.infor.showW3=!0,e.location.w3id&&e.location.sig&&t.path("/bindWeb").replace()),e.location.noreg&&(e.$parent.infor.bind=!0,l.i18n.bind=l.i18n.login),e.infor.ifRemenberHref=g.getUrl(g.getProductionResetUrl,g.getTestResetUrl,e.location),new i({callback:e.actions.callback})}]).controller("bindCtrl",["$scope","COMMON","$location",function(e,r,t){var o=r(e);e.actions={nextPage:function(){if(e.accountForm.$invalid){if(o.validate(e.accountForm.phoneNum.$error,"phoneError"))return;return void o.validate(e.accountForm.validCode.$error,"codeError")}o.httpHandle("/members/wbind/verifytelbyqq",{s:e.infor.session,tn:e.infor.phoneNum,vid:e.infor.codeId,vtx:e.infor.validCode},e.actions.nextPageHandle,e.actions.getImgCode,{params:e.location})},nextPageHandle:function(r){e.$parent.infor.errorCode="",e.infor.session=r.s,o.clearImportantInfor(),o.storeInfo(),t.path("/bindPass").replace()},getImgCode:function(){o.getImgCode()}},o.getInfo(),o.invalidPage(e)||(e.$parent.infor.bind=!0,e.$parent.infor.pageTit1=!0,e.$parent.infor.register=!0,e.actions.getImgCode())}]).controller("bindPassCtrl",["$scope","$window","$location","$http","$timeout","COMMON",function(e,r,t,o,n,a){l.errorCode[1118]=l.i18n.input_sms_code;var i=a(e);e.actions={getSms:function(){i.getSms("/members/wbind/getsmsforqqbinding",60)},nextPage:function(){if(e.passwordForm.$invalid||e.infor.password!==e.infor.repassword){if(i.validate(e.passwordForm.password.$error,"passwordError"))return;if(i.validate(e.passwordForm.repassword.$error,"passwordError"))return;if(i.validate(e.passwordForm.smsCode.$error,"smsError"))return;return void i.noequal()}var r={},t=e.location;i.isNullObj(t)||(t.client_id&&(r.cid=t.client_id),t.response_type&&(r.rt=t.response_type),t.redirect_uri&&(r.ru=t.redirect_uri),t.state&&(r.s=t.state)),r.s=e.infor.session,r.sc=e.infor.smsCode,r.p=e.infor.repassword,i.httpHandle("/members/wbind/setpassforqqbinding",r,e.actions.nextPageHandle,null,{params:e.location})},nextPageHandle:function(r){r&&(e.infor.token=r),e.infor.error=!1,i.clearImportantInfor(),i.storeInfo(),t.path("/bindFinish").replace()}},i.getInfo(),i.invalidPage(e)||(e.actions.getSms(),e.$parent.infor.pageArrow1=!0,e.$parent.infor.pageTit2=!0)}]).controller("bindWebCtrl",["$scope","COMMON","$location",function(e,r,t){var o=r(e);e.actions={getSms:function(){if(o.isNullObj(e.formInvalid)&&!e.accountForm.$invalid||!o.validate(e.accountForm.phoneNum.$error,"phoneError")){var r={tel:e.infor.phoneNum,s:e.infor.session};o.getSms("/members/joinw3userbygetmt",60,r,function(){e.infor.showNum=!0})}},nextPage:function(){if(!o.isNullObj(e.formInvalid)||e.accountForm.$invalid){if(o.validate(e.accountForm.phoneNum.$error,"phoneError"))return;if(o.validate(e.accountForm.smsCode.$error,"smsError"))return}e.actions.nextSent()},nextSent:function(){var r={};r.tel=e.infor.phoneNum,r.sc=e.infor.smsCode,r.s=e.infor.session,o.httpHandle("/members/joinw3userbyverifymt",r,e.actions.nextPageHandle,null,{params:e.location})},nextPageHandle:function(r){e.infor.error=!1,o.clearImportantInfor(),+r.br?(angular.extend(e.infor,r),o.storeInfo(),t.path("/bindWebFinish").replace()):(o.storeInfo(),t.path("/bindWebPass").replace())}};var a={errorCode:"",pageTit1:!0,pageTit2:!1,pageTit3:!1,pageArrow1:!1,pageArrow2:!1,register:!0,bind:!0};angular.extend(e.$parent.infor,a),o.getLocation(),e.infor.session=n("#session").val(),console.log(e.infor.session)}]).controller("bindWebPassCtrl",["$scope","COMMON","$location",function(e,r,t){l.errorCode[1118]=l.i18n.input_sms_code;var o=r(e);e.actions={nextPage:function(){if(e.passwordForm.$invalid||e.infor.password!==e.infor.repassword){if(o.validate(e.passwordForm.password.$error,"passwordError"))return;if(o.validate(e.passwordForm.repassword.$error,"passwordError"))return;return void o.noequal()}var r={};r.s=e.infor.session,r.p=e.infor.repassword,o.httpHandle("/members/joinw3userbypassword",r,e.actions.nextPageHandle,null,{params:e.location})},nextPageHandle:function(r){e.infor.error=!1,angular.extend(e.infor,r),o.clearImportantInfor(),o.storeInfo(),t.path("/bindWebFinish").replace()}},o.getInfo(),o.invalidPage(e)||(e.$parent.infor.pageArrow1=!0,e.$parent.infor.pageTit2=!0)}]).controller("bindWebFinishCtrl",["$scope","$window","$location","$http","STORE","COMMON","$cookieStore","$log",function(e,r,t,o,a,i,l,s){var c=i(e);if(e.actions={nextPage:function(){var t={},o=e.infor.ru,a={gd:"code",err:"err"};for(var i in a)e.infor[i]&&(t[a[i]]=e.infor[i]);angular.extend(t,e.location),r.location.href=o.indexOf("?")<0?o+"?"+n.param(t):o+"&"+n.param(t)}},c.getInfo(),!c.invalidPage(e)){var d={errorCode:"",pageTit1:!0,pageTit2:!0,pageTit3:!0,pageArrow1:!0,pageArrow2:!0,register:!0};console.log("infor",e.location),angular.extend(e.$parent.infor,d),c.reTime(5,function(){c.getDoubleCookie(e.infor,e.actions.nextPage)})}}]).controller("registerCtrl",["$scope","$window","$location","$http","STORE","COMMON","$cookies","$cookieStore",function(e,r,t,o,n,a,i,l){e.$parent.infor=n.get("parent"),e.$parent.infor.developer?t.path("/accountMail").replace():t.path("/account").replace(),e.actions={toPhonePage:function(){t.path("/account").replace()},toMailPage:function(){t.path("/accountMail").replace()}},angular.extend(e.$parent.infor,{register:!0,errorCode:""}),l.put("register",!0),n.set("parent",e.$parent.infor)}]).controller("accountCtrl",["$scope","$window","$location","$http","STORE","COMMON","$log",function(e,r,t,o,n,a,i){var l=a(e);e.actions={nextPage:function(){if(e.accountForm.$invalid){if(l.validate(e.accountForm.phoneNum.$error,"phoneError"))return;return void l.validate(e.accountForm.validCode.$error,"codeError")}l.httpHandle("/members/registerbytel",{tn:e.infor.phoneNum,vid:e.infor.codeId,vtx:e.infor.validCode},e.actions.nextPageHandle,e.actions.getImgCode)},nextPageHandle:function(r){e.$parent.infor.errorCode="",e.infor.session=r.s,l.clearImportantInfor(),l.storeInfo(),t.path("/password").replace()},getImgCode:function(){l.getImgCode()}},e.$parent.infor=n.get("parent"),e.$parent.infor.pageTit1=!0,e.$parent.infor.register=!0,l.getLocation(),e.actions.getImgCode()}]).controller("passwordCtrl",["$scope","$window","$location","$http","$timeout","COMMON",function(e,r,t,o,n,a){l.errorCode[1118]=l.i18n.input_sms_code;var i=a(e);e.actions={getSms:function(){i.getSms("/members/getsmsforregister",60)},nextPage:function(){if(e.passwordForm.$invalid||e.infor.password!==e.infor.repassword){if(i.validate(e.passwordForm.password.$error,"passwordError"))return;if(i.validate(e.passwordForm.repassword.$error,"passwordError"))return;if(i.validate(e.passwordForm.smsCode.$error,"smsError"))return;return void i.noequal()}var r={},t=e.location;i.isNullObj(t)||(t.client_id&&(r.cid=t.client_id),t.response_type&&(r.rt=t.response_type),t.redirect_uri&&(r.ru=t.redirect_uri),t.state&&(r.s=t.state)),r.tn=e.infor.phoneNum,r.s=e.infor.session,r.sc=e.infor.smsCode,r.p=e.infor.repassword,i.httpHandle("/members/registerbypass",r,e.actions.nextPageHandle)},nextPageHandle:function(r){r&&(e.infor.token=r),e.infor.error=!1,i.clearImportantInfor(),i.storeInfo(),t.path("/finish").replace()}},i.getInfo(),i.invalidPage(e)||(e.actions.getSms(),e.$parent.infor.pageArrow1=!0,e.$parent.infor.pageTit2=!0)}]).controller("accountMailCtrl",["$scope","$window","$location","$http","STORE","COMMON","$log",function(e,r,t,o,a,s,c){l.errorCode[1010]=l.emailError.email;var d=s(e);e.codeMail=l.mail,e.actions={nextPage:function(){if(e.formInvalid={},!l.mailRegExp.test(e.infor.mailAccount)&&(e.formInvalid.email=!0),e.accountMailForm.$invalid||e.infor.password!==e.infor.repassword){if(d.validate(e.formInvalid,"emailError"))return;if(d.validate(e.accountMailForm.password.$error,"passwordError"))return;if(d.validate(e.accountMailForm.repassword.$error,"passwordError"))return;if(d.validate(e.accountMailForm.validCode.$error,"codeError"))return;if(d.validate(e.accountMailForm.mailAccount.$error,"emailError"))return;return void d.noequal()}d.httpHandle("/members/registerbyemail",{em:e.infor.mailAccount,p:e.infor.repassword,vtx:e.infor.validCode,vid:e.infor.codeId,up:n.param(e.location)},e.actions.nextPageHandle,e.actions.getImgCode)},getImgCode:function(){d.getImgCode()},nextPageHandle:function(r){e.$parent.infor.errorCode="",e.infor.session=r.s,d.clearImportantInfor(),d.storeInfo(),t.path("/verifyMail").replace()},callback:function(r){e.infor.mailAccount=r}},e.$parent.infor=a.get("parent"),e.$parent.infor.pageTit1=!0,e.$parent.infor.register=!0,d.getLocation(),e.actions.getImgCode(),new i({callback:e.actions.callback})}]).controller("verifyMailCtrl",["$scope","$window","$location","$http","STORE","COMMON",function(e,r,t,o,n,a){var i=a(e);if(e.actions={sendMail:function(){i.sendMail("/members/sendemail",30)},hideBtn:function(){c?e.infor.address=!0:e.infor.address=!1},nextPage:function(){r.location.href=c}},i.getInfo(),!i.invalidPage(e)){var s=e.infor.mailAccount.split("@")[1],c=l.mail[s];e.$parent.infor.pageArrow1=!0,e.$parent.infor.pageTit2=!0,e.actions.hideBtn(),e.actions.sendMail()}}]).controller("finishCtrl",["$scope","$window","$location","$http","STORE","COMMON","$cookieStore","$log",function(e,r,t,o,i,l,s,c){var d=l(e),p=t.search();e.actions={nextPage:function(){if(e.infor.error)return void(e.$parent.infor.bind?d.bindPage():d.changePage());if(!e.location.redirect_uri)return void(r.location.href=d.getUrl(d.getProductionYunUrl,d.getTestYunUrl));var t=decodeURIComponent(e.location.redirect_uri),o=a._parserUrl(t);d.isNullObj(e.location)||angular.extend(o.param,e.location),e.infor.token&&e.infor.token.gd&&(o.param.code=e.infor.token.gd);var i=d.isNullObj(o.param)?o.url:o.url+"?"+n.param(o.param);r.location.href=i},verify:function(){var r=p.act?"/api/email/verifyactivationcodeforregister":"/members/activation";d.httpHandle(r,{c:p.code},e.actions.nextPageRight,e.actions.nextPageError)},nextPageRight:function(r){e.infor.error=!1,e.infor.token=r,e.location=a._parserUrl(r.up).param},nextPageError:function(r){e.infor.error=!0}},d.getInfo();var u={errorCode:"",pageTit1:!0,pageTit2:!0,pageTit3:!0,pageArrow1:!0,pageArrow2:!0,register:!0};if(angular.extend(e.$parent.infor,u),d.isNullObj(e.infor)){if(!p.code)return void d.changePage();e.infor={},e.actions.verify()}d.phoneScreenHandle()}]).controller("main",["$scope","$location","STORE","$log","$window","COMMON","$cookies","$cookieStore",function(e,r,t,o,n,a,i,c){t.clear(),e.i18n=l.i18n;var d=a(e);d.getLocation(),e.infor={register:"true"==i.register||!1,pop:!1,popNotice:l.i18n.login_page_timeout,popBtn:l.i18n.register,pageTit1:!1,pageTit2:!1,pageTit3:!1,pageArrow1:!1,pageArrow2:!1,developer:/developer|yyh/.test(s().attr("path")),w3:/w3/.test(s().attr("path")),card:e.location.card},e.actions={register:function(){e.infor.developer?r.path("/accountMail").replace():r.path("/account").replace()},login:function(){r.path("/").replace()},origin_login:function(){n.location.href="//shop.gionee.com/login.shtml"}},t.set("parent",e.infor)}])}.call(r,t,r,e),!(void 0!==o&&(e.exports=o))},25:10});