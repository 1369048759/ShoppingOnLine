function $namespace(name){for(var arr=name.split(","),r=0,len=arr.length;len>r;r++)for(var i=0,k,name=arr[r].split("."),parent={};k=name[i];i++)0===i?eval("(typeof "+k+')==="undefined"?('+k+'={}):"";parent='+k):parent=parent[k]=parent[k]||{}}function $getCookie(name){var reg=RegExp("(^| )"+name+"(?:=([^;]*))?(;|$)"),val=document.cookie.match(reg);return val?val[2]?unescape(val[2]):"":null}function $report(url,param){param=param||{};var arr=[];for(var k in param)arr.push(k+"="+param[k]);arr.push((new Date).getTime());var reportUrl=url+(-1!=url.indexOf("?")?"&":"?")+arr.join("&"),img=new Image(0);img.onload=img.onerror=img.onabort=function(){img.onload=img.onerror=img.onabort=null},img.src=reportUrl}function $incNum(acc){return acc=acc||$incNum,acc.num=acc.num||0,acc.num++}function $bindEvent(dom,handle,type){function setHandler(dom,type,handler,wraper){var eid=dom.__eventId=dom.__eventId||$incNum();$bindEvent.__allHandlers=$bindEvent.__allHandlers||{},$bindEvent.__allHandlers[eid]=$bindEvent.__allHandlers[eid]||{},$bindEvent.__allHandlers[eid][type]=$bindEvent.__allHandlers[eid][type]||[],$bindEvent.__allHandlers[eid][type].push({handler:handler,wraper:wraper})}function createDelegate(handle,context){return function(e){return handle.call(context,e||window.event)}}if(dom&&handle)if(type=type||"click",dom instanceof Array)for(var i=0,l=dom.length;l>i;i++)$bindEvent(dom[i],handle,type);else if(type instanceof Array)for(var i=0,l=type.length;l>i;i++)$bindEvent(dom,handle,type[i]);else if(window.addEventListener){var wrapper=createDelegate(handle,dom);setHandler(dom,type,handle,wrapper),dom.addEventListener(type,wrapper,!1)}else if(window.attachEvent){var wrapper=createDelegate(handle,dom);setHandler(dom,type,handle,wrapper),dom.attachEvent("on"+type,wrapper)}else dom["on"+type]=handle}function $getTarget(e,parent,tag){var e=e||window.event,tar=e.srcElement||e.target;if(parent&&tag&&tar.nodeName.toLowerCase()!=tag)for(;tar=tar.parentNode;){if(tar==parent||tar==document.body||tar==document)return null;if(tar.nodeName.toLowerCase()==tag)break}return tar}function $getQuery(name){var u=arguments[1]||window.location.search,reg=RegExp("(^|&)"+name+"=([^&]*)(&|$)"),r=u.substr(u.indexOf("?")+1).match(reg);return null!=r?r[2]:""}$namespace("sp.common.footer"),sp.common.footer.data={},sp.common.footer.dom={},sp.common.footer.init=function(){this.initReport()},sp.common.footer.initReport=function(){function encode(str){return str&&str.replace?encodeURIComponent(str.replace(/\|/g,"_")):""}function reportLoad(pageId,referId,referer,fromId){var url=encode(location.href),uid=encode($getCookie("uid")),sid=encode($getCookie("sid"));$report("http://"+hn+"/dp/rptData",{id:pageId,type:"pv",data:url+"|"+referId+"|"+referer+"|"+fromId,uid:uid,sid:sid})}function startRtagMonitor(pageId){if($bindEvent(document.body,function(e){for(var t,dom=$getTarget(e);dom&&dom!=this&&!(t=dom.getAttribute("rtag"));)dom=dom.parentNode;if(t){var uid=encode($getCookie("uid")),sid=encode($getCookie("sid"));$report("http://"+hn+"/dp/rptData",{id:pageId,type:"rtag",data:encode(t),uid:uid,sid:sid})}}),t=$getQuery("rtag")){var uid=encode($getCookie("uid")),sid=encode($getCookie("sid"));$report("http://"+hn+"/dp/rptData",{id:pageId,type:"rtag",data:encode(t),uid:uid,sid:sid})}}var w=window,hn=location.hostname.split(".");hn.reverse(),hn.length=2,hn.push("rd"),hn.reverse(),hn=hn.join(".");var pageId=encode(w.__PAGEID||location.protocol+"//"+location.host+location.pathname),referId=encode(w.__REFERID||$getQuery("REF")),referer=encode(document.referrer),fromId=encode(w.__FROMID);reportLoad(pageId,referId,referer,fromId),startRtagMonitor(pageId)},sp.common.footer.init();